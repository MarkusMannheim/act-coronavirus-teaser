<!DOCTYPE html>
<html>
  <head>
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-155991615-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag("js", new Date());
      gtag("config", "UA-155991615-1");
    </script>

    <!-- metaphysics -->
    <meta charset="utf-8">
    <title>ACT COVID-19 update</title>
    <meta name="author" content="Markus Mannheim">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- scripts -->
    <script src="./resources/d3.v6.min.js"></script>
    <script src="./resources/topojson.v3.min.js"></script>
    <link href="./resources/new.css" rel="stylesheet">
    <link href="./resources/abcLogo64.png" rel="icon">
  </head>

  <body>
    <div id="container">
      <div id="header">ACT COVID-19 UPDATE</div>
      <div id="selector">
        <div class="choice selected" id="choiceOutcomes" onclick="select(this, 'outcomes')">outcomes</div>
        <div class="choice" id="choiceCases" onclick="select(this, 'cases')">cases</div>
        <div class="choice" id="choiceVaccinations" onclick="select(this, 'vaccinations')">vaccinations</div>
      </div>
      <svg id="chart">
        <g id="chartGroup"></g>
      </svg>
    </div>

    <script>
      // page elements
      container = d3.select("#container");
      chart = d3.select("#chart");
      chartGroup = d3.select("#chartGroup");
      choices = d3.selectAll(".choice");
      selection = "outcomes";

      // load LGA data
      d3.csv("./data/vaxData.csv")
        .then(function(data) {

          // data
          vaxData = data;

          // fade in; calculate chart dimensions
          d3.timeout(function() {
            window.addEventListener("resize", resize);
            resize();
            chart.transition()
              .duration(500)
              .style("opacity", 1);
          }, 1000);
        });

      function select(element, choice) {
        choices.classed("selected", false);
        element.classList.toggle("selected");
        selection = choice;
      }

      function resize() {
        dimensions = document.getElementById("chart").getBoundingClientRect();
        width = dimensions.width;
        height = dimensions.height;
      }
    </script>
  </body>
</html>
